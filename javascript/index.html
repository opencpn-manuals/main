<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Javascript Plugin :: OpenCPN</title>
    <link rel="canonical" href="https://opencpn-manuals.github.io/main/javascript/index.html">
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<header class="header">
  <div class="navbar">
    <div class="ocpn-logo"> </div>
    <div class="navbar-brand">
      <a class="navbar-item" href="https://opencpn-manuals.github.io/main">OpenCPN</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
       <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="https://www.opencpn.org/">
                OpenCPN.org
              </a>
              <a class="navbar-item" href="https://github.com/opencpn/OpenCPN">
                Github Site
              </a>
              <a class="navbar-item" href="https://opencpn.org/flyspray/">
                Bugtracker
              </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="javascript" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">Javascript Plugin Manual</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../admiralty/index.html">Admiralty Tide Tables</a>
    </li>
    <li class="component">
      <a class="title" href="../rtlsdr/index.html">AIS RTLsdr USB</a>
    </li>
    <li class="component">
      <a class="title" href="../ais-vd/0.1/index.html">AIS-vd</a>
    </li>
    <li class="component">
      <a class="title" href="../aisradar/index.html">AISradar</a>
    </li>
    <li class="component">
      <a class="title" href="../autopilot-rm/0.1/index.html">Autopilot Raymarine</a>
    </li>
    <li class="component">
      <a class="title" href="../autopilot_route/index.html">Autopilot Route</a>
    </li>
    <li class="component">
      <a class="title" href="../autotrackraymarine/index.html">AutoTrackRaymarine Evo</a>
    </li>
    <li class="component">
      <a class="title" href="../calculator/index.html">Calculator</a>
    </li>
    <li class="component">
      <a class="title" href="../celestial_navigation/index.html">Celestial Navigation</a>
    </li>
    <li class="component">
      <a class="title" href="../chartdldr/index.html">Chart Downloader Manual</a>
    </li>
    <li class="component">
      <a class="title" href="../chartscale/index.html">ChartScale</a>
    </li>
    <li class="component">
      <a class="title" href="../climatology/index.html">Climatology</a>
    </li>
    <li class="component">
      <a class="title" href="../dashboard/index.html">Dashboard</a>
    </li>
    <li class="component">
      <a class="title" href="../dashboard_tactics/index.html">Dashboard Tactics</a>
    </li>
    <li class="component">
      <a class="title" href="../dashboardsk/index.html">DashboardSK</a>
    </li>
    <li class="component">
      <a class="title" href="../debugger/0.1/index.html">Debugger</a>
    </li>
    <li class="component">
      <a class="title" href="../deviation/index.html">Deviation</a>
    </li>
    <li class="component">
      <a class="title" href="../dead_reckoning/index.html">DR</a>
    </li>
    <li class="component">
      <a class="title" href="../e_timer/index.html">e_timer</a>
    </li>
    <li class="component">
      <a class="title" href="../earthexplorer/index.html">EarthExplorer</a>
    </li>
    <li class="component">
      <a class="title" href="../engine-dash/0.1/index.html">EngineDashboard</a>
    </li>
    <li class="component">
      <a class="title" href="../findit/index.html">FindIt</a>
    </li>
    <li class="component">
      <a class="title" href="../frcurrents/index.html">frcurrents</a>
    </li>
    <li class="component">
      <a class="title" href="../gps-odometer/index.html">GPS-Odometer</a>
    </li>
    <li class="component">
      <a class="title" href="../route/index.html">Great Circle Route</a>
    </li>
    <li class="component">
      <a class="title" href="../grib/index.html">Grib Weather Data Plugin</a>
    </li>
    <li class="component is-current">
      <a class="title" href="index.html">Javascript Plugin Manual</a>
    </li>
    <li class="component">
      <a class="title" href="../radarhub_pi/index.html">KAHU Radar Hub</a>
    </li>
    <li class="component">
      <a class="title" href="../launcher/0.1/index.html">Launcher</a>
    </li>
    <li class="component">
      <a class="title" href="../logbook/index.html">Logbook</a>
    </li>
    <li class="component">
      <a class="title" href="../ncdf/index.html">NCDF Tidal Currents</a>
    </li>
    <li class="component">
      <a class="title" href="../nmea_converter/index.html">NMEA Converter</a>
    </li>
    <li class="component">
      <a class="title" href="../nsk/index.html">NSK</a>
    </li>
    <li class="component">
      <a class="title" href="../nv_charts/index.html">nv_charts</a>
    </li>
    <li class="component">
      <a class="title" href="../o-charts/index.html">o-charts</a>
    </li>
    <li class="component">
      <a class="title" href="../objsearch/0.1/index.html">ObjSearch</a>
    </li>
    <li class="component">
      <a class="title" href="../odraw/index.html">Ocpn_Draw</a>
    </li>
    <li class="component">
      <a class="title" href="../oesenc/0.1/index.html">oesenc</a>
    </li>
    <li class="component">
      <a class="title" href="../ocpn-dev-manual/0.1/index.html">OpenCPN Developer Manual</a>
    </li>
    <li class="component">
      <a class="title" href="../manuals/index.html">OpenCPN Manuals</a>
    </li>
    <li class="component">
      <a class="title" href="../opencpn-plugins/index.html">OpenCPN Plugins</a>
    </li>
    <li class="component">
      <a class="title" href="../opencpn-dev/index.html">OpenCPN Programming Manual</a>
    </li>
    <li class="component">
      <a class="title" href="../otcurrent/index.html">oTcurrent</a>
    </li>
    <li class="component">
      <a class="title" href="../otidalplan/index.html">oTidalPlan</a>
    </li>
    <li class="component">
      <a class="title" href="../otidalroute/index.html">oTidalRoute</a>
    </li>
    <li class="component">
      <a class="title" href="../photolayer/index.html">PhotoLayer</a>
    </li>
    <li class="component">
      <a class="title" href="../plots/index.html">Plots</a>
    </li>
    <li class="component">
      <a class="title" href="../plugin-installer/Home.html">Plugin Installer Documentation</a>
    </li>
    <li class="component">
      <a class="title" href="../polar/index.html">Polar</a>
    </li>
    <li class="component">
      <a class="title" href="../projections/0.1/index.html">Projections</a>
    </li>
    <li class="component">
      <a class="title" href="../pypilot/index.html">Pypilot Autopilot</a>
    </li>
    <li class="component">
      <a class="title" href="../race-start/0.1/index.html">RaceStart</a>
    </li>
    <li class="component">
      <a class="title" href="../radar/0.1/index.html">Radar Manual</a>
    </li>
    <li class="component">
      <a class="title" href="../rotationctrl/index.html">Rotation Control</a>
    </li>
    <li class="component">
      <a class="title" href="../s63_vector_charts/0.1/index.html">s63_vector_charts</a>
    </li>
    <li class="component">
      <a class="title" href="../sailawaynmea/index.html">SailawayNMEA</a>
    </li>
    <li class="component">
      <a class="title" href="../sar/index.html">SAR</a>
    </li>
    <li class="component">
      <a class="title" href="../shipdriver/index.html">ShipDriver</a>
    </li>
    <li class="component">
      <a class="title" href="../AlternativeWorkflow/index.html">Shipdriver Managed Workflow for the OpenCPN plugins</a>
    </li>
    <li class="component">
      <a class="title" href="../squiddio/0.1/index.html">sQuiddio</a>
    </li>
    <li class="component">
      <a class="title" href="../statusbar/index.html">Statusbar</a>
    </li>
    <li class="component">
      <a class="title" href="../survey/index.html">Survey</a>
    </li>
    <li class="component">
      <a class="title" href="../tactics/index.html">Tactics</a>
    </li>
    <li class="component">
      <a class="title" href="../tidefinder/index.html">TideFinder</a>
    </li>
    <li class="component">
      <a class="title" href="../twocan/0.1/index.html">TwoCan Plugin</a>
    </li>
    <li class="component">
      <a class="title" href="../uktides/index.html">UKtides</a>
    </li>
    <li class="component">
      <a class="title" href="../vfkaps/index.html">VFkaps</a>
    </li>
    <li class="component">
      <a class="title" href="../vdr/index.html">Voyage Data Recorder</a>
    </li>
    <li class="component">
      <a class="title" href="../watchdog/index.html">Watchdog</a>
    </li>
    <li class="component">
      <a class="title" href="../weather_routing/index.html">Weather Routing</a>
    </li>
    <li class="component">
      <a class="title" href="../weatherfax/index.html">WeatherFax</a>
    </li>
    <li class="component">
      <a class="title" href="../windvane/0.1/index.html">Windvane</a>
    </li>
    <li class="component">
      <a class="title" href="../wmm/index.html">WMM magnetic variations</a>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../manuals/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/antipole2/JavaScript_pi/edit/master/manual/modules/ROOT/pages/index.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Javascript Plugin</h1>
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="_images/js_icon_full_size_.png" alt="js icon full size ">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_aim"><a class="anchor" href="#_aim"></a>Aim</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Allows you to write scripts in JavaScript that extend the
functioning of OpenCPN without getting into the complexity of writing a
plugin.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_how_does_it_work"><a class="anchor" href="#_how_does_it_work"></a>How does it work?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The plugin provides one or more console windows comprising a script pane, a
results pane and some buttons. You enter your JavaScript in the script
pane (or load it from a file) and click on the Run button. The script is
compiled into byte code and executed and any result is displayed. At its
simplest, enter, say</p>
</div>
<div class="listingblock">
<div class="content">
<pre>print("Hello from OpenCPN\n");</pre>
</div>
</div>
<div class="paragraph">
<p>When you click on the Run button, the message will be displayed.  (The \n bit adds a new line to the end of the message.)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/Console.png" alt="Console">
</div>
</div>
<div class="paragraph">
<p>The plugin extends JavaScript to add many interfaces to OpenCPN and it is here that the fun starts.
As an example, the following statement takes the supplied NMEA sentence, adds a checksum (replacing any existing one) and
pushes it out over the OpenCPN connections:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OCPNpushNMEA(“$OCRMB,A,0.000,L,,Yarmouth,5030.530,N,00120.030,W,
       15.386,82.924,0.000,5030.530,S,00120.030,E,V");</pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to arrrange for a JavaScript function to be executed on certain OpenCPN events.
For example, this script listens for an NMEA sentence and, if it the checksum is correct, displays it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OCPNonNMEAsentence(handleNMEA);

function handleNMEA(result){
    if(result.OK){
    print(“Received: “, result.value, “\n”);
        }
    else print(“Bad checksum\n”);
    }</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_application"><a class="anchor" href="#_example_application"></a>Example application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following script examines all waypoints.
If the icon name is <em>circle</em>, it sets the waypoint to display at all chart scales.
Otherwise it set it to display on large scale charts only.
Thus anchorage waypoints, docks and the like will not clutter small scale charts.</p>
</div>
<div class="paragraph">
<p>You can easily adopt this to your own criteria.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>scaled = unscaled = 0;	              // counters
guids = OCPNgetWaypointGUIDs();           // get all waypoint GUIDs
for (g = 0; g &lt; guids.length; g++){	// for each waypoint
	waypoint = OCPNgetSingleWaypoint(guids[g]);	// get the waypoint
	if (!waypoint.isFreeStanding) continue; // skip routepoints
	if (waypoint.iconName == "circle") {
		waypoint.useMinScale = false;
		unscaled++;}
	else {
		waypoint.minScale = 52000;
		waypoint.useMinScale = true;
		scaled++;
		}
	OCPNupdateSingleWaypoint(waypoint); // update in OCPN
	}
scriptResult("scaled: " + scaled + " unscaled: " + unscaled);</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_script_library"><a class="anchor" href="#_script_library"></a>Script library</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is a <a href="https://github.com/antipole2/JavaScripts-shared/blob/main/library/library_index.adoc">library of useful scripts</a> which you can use as they are or modify for your own purposes.
Contributions to this are welcome.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources"><a class="anchor" href="#_resources"></a>Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A comprehensive user guide is available as a .pdf  and also in .epub format, which may be more convenient for mobile devices.
They can be down-loaded from here:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/antipole2/JavaScript_pi/blob/master/documentation/JavaScript_plugin_user_guide.pdf">User guide as .pdf</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/antipole2/JavaScript_pi/blob/master/documentation/JavaScript_plugin_user_guide.epub">User guide as .epub</a></p>
</div>
<div class="paragraph">
<p>There is also a <a href="https://github.com/antipole2/JavaScript_pi/blob/master/documentation/JavaScript_plugin_technical_guide.pdf">technical guide</a> for those wanting to understand the internal functioning of the plugin or maintain it.
This is not relevant for plugin users.</p>
</div>
<div class="paragraph">
<p><a href="https://www.cruisersforum.com/forums/f134/javascript-plugin-v2-thread-after-25-jan-23-a-272422.html#post3735034">Cruisers Forum Thread</a></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/antipole2/JavaScript_pi">Github Repository</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_support"><a class="anchor" href="#_support"></a>Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For discussion on applications of the plugin, use the forum thread.</p>
</div>
<div class="paragraph">
<p>There is a <a href="https://github.com/antipole2/JavaScript_pi/discussions">discussion forum</a> where you can ask questions such as "How can I do x?" It also contains release notices for updates to the plugin.</p>
</div>
<div class="paragraph">
<p>For problems with the plugin or feature requests, please <a href="https://github.com/antipole2/JavaScript_pi/issues">raise an issue here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faqs"><a class="anchor" href="#_faqs"></a>FAQs</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>How do I learn JavaScript programming?</strong></p>
</div>
<div class="paragraph">
<p>Start with a simple example and build up by trying things.
Have a look at the examples in the <a href="https://github.com/antipole2/JavaScripts-shared/blob/main/library/library_index.adoc">script library</a>.</p>
</div>
<div class="paragraph">
<p>There is a good reference guide <a href="https://www.w3schools.com/js/js_statements.asp">here</a>.
JavaScript is much used in programming websites and many of the examples in the tutorials assume that.  Ignore examples accessing the document object, such as
<em>document.getElementById("demo").innerHTML</em>
The reference material is very good but some of the latest JavaScript constructs are not supported by the plugin.
See the plugin user guide.</p>
</div>
<div class="paragraph">
<p><strong>Can it do this or that?</strong></p>
</div>
<div class="paragraph">
<p>Read the user guide which documents the APIs that allow a script to interact with OpenCPN.
Have a look at the library of sample scripts, which may help you see how to do what you want.
If you cannot find what you need, ask in the <a href="https://github.com/antipole2/JavaScript_pi/discussions">discussions forum</a>.</p>
</div>
<div class="paragraph">
<p><strong>It cannot do what I need - can that be added?</strong></p>
</div>
<div class="paragraph">
<p>If you have confirmed the plugin cannot do something you would like it to, <a href="https://github.com/antipole2/JavaScript_pi/issues">submit an enhancement request here</a>.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.
     Sources: https://gitlab.com/leamas/antora-ui-default
  </p>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script src="../_/js/vendor/lunr.js"></script>
<script src="../_/js/search-ui.js" id="search-ui-script" data-site-root-path=".." data-snippet-length="100" data-stylesheet="../_/css/search.css"></script>
<script async src="../search-index.js"></script>
  </body>
</html>
