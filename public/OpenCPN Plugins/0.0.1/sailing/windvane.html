<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled :: Local Preview</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar" style="">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">
        <img src="../../../_/img/docs_logo.png" style="height:40px">
      </a>
      <!-- We don't have anything in the menu, but the burger still appears
           on mobile devices. So let's remove it. -->
      <!--<button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>-->
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="OpenCPN Plugins" data-version="0.0.1">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">OpenCPN User Plugins Manual</span>
    <span class="version">0.0.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">OpenCPN User Plugins Manual</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">ShipDriver OpenCPN plugin docs.</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../shipdriver/0.0.1/shipdriver.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  
  <ul>
    <li class="crumb HO"><a href="../index.html">OpenCPN User Plugins Manual</a></li>
  </ul>
  
</nav>
  <div class="edit-this-page"><a href="https://github.com/Rasbats/ocpn-user-plugins-manual/edit/main/modules/ROOT/pages/sailing/windvane.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<div class="sect1">
<h2 id="_windvane_autopilot"><a class="anchor" href="#_windvane_autopilot"></a>Windvane Autopilot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Developer: Jon Gough</p>
</div>
<div class="sect2">
<h3 id="_links"><a class="anchor" href="#_links"></a>Links</h3>
<div class="ulist">
<ul>
<li>
<p>Sources: <a href="https://github.com/jongough/windvane_pi" class="bare">https://github.com/jongough/windvane_pi</a></p>
</li>
<li>
<p>Releases: <a href="https://github.com/jongough/windvane_pi/releases" class="bare">https://github.com/jongough/windvane_pi/releases</a></p>
</li>
<li>
<p>Download: <a href="https://opencpn.org/OpenCPN/plugins/windvane.html" class="bare">https://opencpn.org/OpenCPN/plugins/windvane.html</a></p>
</li>
<li>
<p>Forum:
<a href="http://www.cruisersforum.com/forums/f134/windvane_pi-192165.html">Windvane
Thread</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_summary"><a class="anchor" href="#_summary"></a>Summary</h3>
<div class="paragraph">
<p>This plugin is for those that have older style auto pilots that have
simplistic inputs/outputs and whose yachts are not suitable for normal
windvane autopilots. This plugin uses the wind instruments that OpenCPN
can see, i.e. the ones that allow the display of wind direction and
speed, to control the standard autopilot. This is done by using the APB
and RMB NMEA 0183 sentences. In this case the plugin creates new
versions of the sentences with a prefix of “WV” so that it can be easily
used. When this plugin is installed both the WVAPB and WVRMB sentences
will be produced irrespective of whether the plugin is being used. If
the plugin is not being used the APB and RMB sentences are the same as
normally generated, but if the plugin is being used then the APB and RMB
sentences are modified to make the autopilot follow the wind changes.
This makes the setup of the connections filtering easier.</p>
</div>
</div>
<div class="sect2">
<h3 id="_use"><a class="anchor" href="#_use"></a>Use</h3>
<div class="paragraph">
<p>When the plugin is enabled it will show
<span class="image"><img src="../_images/manual/plugins/windvane_autopilot/windvane_toolbar_icon.png" alt="image" width="27" height="27"></span>in
the OpenCPN toolbar. This tool will not activate unless there is wind,
gps and heading information being provided to OpenCPN. You will get a
warning dialog:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/manual/plugins/windvane_autopilot/windvane_warning_message.png" alt="image" width="319" height="149"></span></p>
</div>
<div class="paragraph">
<p>If there is wind, gps and heading information being supplied you will
activate the main autopilot dialog:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/manual/plugins/windvane_autopilot/windvane_dialog.png" alt="image" width="220" height="384"></span></p>
</div>
<div class="paragraph">
<p>'This will show you the current 'aggresiveness' to follow the required
Angle by modifying the amount of virtual XTE is being sent to the
autopilot and the 'sensitivity' to variations in wind direction. These
sliders are used to control how much rudder to put in when the wind
direction is not as required and how many seconds to average the wind
direction over.</p>
</div>
<div class="paragraph">
<p>The dial part of the diagram shows the Smoothed Wind Angle (SWA) as a
number and graphically as the brown pointer. It shows the current
Apparant Wind Angle (AWA) as a number and graphically as a blue pointer.
The final item is the yellow 'bug'. This is used to set the desired wind
angle. When the WV icon is pressed the bug is set to the current wind
angle. If this angle needs to be changed it can be dragged with the left
mouse button held down. The number in the middle of the dial shows the
numeric number of degrees from straight ahead that the bug is set too.</p>
</div>
<div class="paragraph">
<p>It should be very easy to use, although it may take a little trial and
error to get the Angle/XTE and Sensitivity settings correct for your
yacht. Each sailing day is different so the settings may/will need
adjusting for the current conditions to get the desired result.</p>
</div>
<div class="paragraph">
<p>Clicking on the WV icon in the OpenCPN tool bar when the dialog is shown
will turn off the autopilot and the normal route following messages will
start to flow to the autopilot.</p>
</div>
</div>
<div class="sect2">
<h3 id="_setup"><a class="anchor" href="#_setup"></a>Setup</h3>
<div class="paragraph">
<p>There are two items that have to be setup to make this work</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The filtering of the messages from OpenCPN to the autopilot. You will
need to filter the 'ECAPB' and 'ECRMB' messages so that they do not get
transmitted. You need to ensure the 'WVAPB' and 'WVRMB' messages are
being sent instead.</p>
</li>
<li>
<p>The default setting to use for the plugin. These are setup in the
Windvane Preferences.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_windvane_preferences"><a class="anchor" href="#_windvane_preferences"></a>Windvane Preferences</h4>
<div class="sect4">
<h5 id="_general"><a class="anchor" href="#_general"></a>General</h5>
<div class="paragraph">
<p><span class="image"><img src="../_images/manual/plugins/windvane_autopilot/windvane_properties_-_general.png" alt="image" width="493" height="407"></span></p>
</div>
<div class="sect5">
<h6 id="_autopilot_update_frequency_secs"><a class="anchor" href="#_autopilot_update_frequency_secs"></a>AutoPilot Update Frequency (Secs)</h6>
<div class="paragraph">
<p>This is the default time between sending messages to the autopilot. If
your autopilot wants them every 5 seconds there is no point in sending
these every second, it just slows the whole system down. So this setting
is dependent on the way your autopilot works.</p>
</div>
</div>
<div class="sect5">
<h6 id="_anglexte_ratio_upper_limit"><a class="anchor" href="#_anglexte_ratio_upper_limit"></a>Angle/XTE ratio upper limit</h6>
<div class="paragraph">
<p>This sets the length of the slider in the active Windvane Autopilot
dialog. This may take a bit of trial and error to determine what works
best for your yacht. The higher the number the more aggressively the
plugin will get in telling your autopilot how far off course you are.
Autopilots often ignore small XTE errors and only start to modify
direction when they get past a certain, internal limit. They will have
algorithms that determine how aggressively to keep on a given route.
This setting allows the plugin to handle the depending on conditions.</p>
</div>
</div>
<div class="sect5">
<h6 id="_wind_change_sensitivity"><a class="anchor" href="#_wind_change_sensitivity"></a>Wind change sensitivity</h6>
<div class="paragraph">
<p>This sets the maximum time over which to smooth the wind directioni.
This normally needs to be set to a suffient time to allow for wave/swell
action and boat reaction to wind changes. If the number is too big it
makes setting the correct value on the Windvane Autopilot dialog more
difficult as the slider will only need to be moved a very small distance
to change values.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_help"><a class="anchor" href="#_help"></a>Help</h5>
<div class="paragraph">
<p><span class="image"><img src="../_images/manual/plugins/windvane_autopilot/windvane_properties_-_help.png" alt="image" width="493" height="407"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="_about"><a class="anchor" href="#_about"></a>About</h5>
<div class="paragraph">
<p><span class="image"><img src="../_images/manual/plugins/windvane_autopilot/windvane_properties_-_about.png" alt="image" width="493" height="407"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="_license"><a class="anchor" href="#_license"></a>License</h5>
<div class="paragraph">
<p><span class="image"><img src="../_images/manual/plugins/windvane_autopilot/windvane_properties_-_license.png" alt="image" width="493" height="407"></span></p>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
<div id="contributing">
    <p class="contribute">Want to know more? <a href="https://opencpn.org/">Learn about OpenCPN.</a></p>
</div>
  </main>
</div>
<footer class="footer">
  <p>All Fedora Documentation content available under <a href="http://creativecommons.org/licenses/by-sa/3.0/legalcode">CC-BY-SA 3.0</a> or, when specifically noted, under another <a href="https://fedoraproject.org/wiki/Licensing:Main">accepted</a> free and open content license.</p>
  <p>Last build: </p>
</footer>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
