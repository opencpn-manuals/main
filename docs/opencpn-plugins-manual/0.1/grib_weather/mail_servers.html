<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: OpenCPN Plugins Manual</title>
    <link rel="canonical" href="https://github.com/Rasbats/opencpn-plugins-manual/opencpn-plugins-manual/0.1/grib_weather/mail_servers.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <div class="navbar">
    <div class="navbar-brand">
      <div class="ocpn-logo"> </div>
      <a class="navbar-title"
         href="https://github.com/Rasbats/opencpn-plugins-manual"
      >
        OpenCPN Plugins Manual
        </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
       <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://www.opencpn.org">OpenCPN.org</a>
            <a class="navbar-item"
               href="https://opencpn.org/wiki/dokuwiki/doku.php?id=opencpn:opencpn_user_manual"
            >
               User Manual
               </a>
            <a class="navbar-item" href="https://github.com/opencpn/OpenCPN">
               Github Site
               </a>
            <a class="navbar-item" href="https://opencpn.org/flyspray/">
               Bugtracker
               </a>
            <a class="navbar-item"
                href="https://rasbats.github.io/opencpn-plugins-manual/">
                    Plugin Manual (pre-alpha)
               </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="opencpn-plugins-manual" data-version="0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-explore is-active" data-panel="explore">
  <div class="context">
    <span class="title">OpenCPN Plugins Manual</span>
    <span class="version">0.1</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../dead_reckoning/0.1/dead_reckoning.html">DR</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../dead_reckoning/0.1/dead_reckoning.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../odraw/0.1/odraw.html">odraw</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../odraw/0.1/odraw.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">OpenCPN Plugins Manual</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../otcurrent/0.1/otcurrent.html">otcurrent</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../otcurrent/0.1/otcurrent.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../shipdriver/0.1/shipdriver.html">ShipDriver</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../shipdriver/0.1/shipdriver.html">0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../watchdog/0.1/watchdog.html">Watchdog Manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../watchdog/0.1/watchdog.html">0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect1">
<h2 id="_mail_servers"><a class="anchor" href="#_mail_servers"></a>Mail Servers</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_warning"><a class="anchor" href="#_warning"></a>Warning!</h3>
<div class="paragraph">
<p><strong>This is an Advanced subject, that is not necessary for running the grib
plugin.<br>
Do not try these setups unless you are familiar with your operating
system, comfortable with handling the command line interface and editing
configuration files.<br>
Do not expect these instructions to work without some customization.</strong></p>
</div>
<div class="paragraph">
<p>This page contains detailed instructions on how to set up mailservers to
automatically send grib request mails to Sail Docs.<br>
“Ptizef” &amp; “rgleason” have compiled the instructions for
<strong>Windows/Thunderbird</strong><br>
“Ptizef” has compiled the instructions for <strong>Linux/SSMTP.</strong><br>
“Cagney” has compiled the instructions for <strong>Linux/Exim4</strong>.<br>
“CarCode” has compiled the instructions for <strong>Mac OS X/PostFix</strong> .</p>
</div>
</div>
<div class="sect2">
<h3 id="_windows_mapi_mail_server_setup"><a class="anchor" href="#_windows_mapi_mail_server_setup"></a>Windows MAPI Mail Server Setup</h3>
<div class="paragraph">
<p>The plugin&#8217;s email request depends on the user&#8217;s selection of the
default MAPI email program which is dependent on the Operating System
conventions. Linux, Windows and Mac are all different. If the plugin
does not find a default MAPI program, an appropriate message will show
in the plugin menu:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-code hljs" data-lang="code"> Request can't be sent. Please verify your email system parameters.
 You should also have a look at your log file.
 Save or Cancel to finish...</code></pre>
</div>
</div>
<div class="paragraph">
<p>and there will be an error message in the opencpn.log similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-code hljs" data-lang="code"> 10:55:47 PM: MAIL Error: Failed to logon to MAPI using a shared session, Error:3</code></pre>
</div>
</div>
<div class="paragraph">
<p>To fix this problem use a google search, and find links such as
<a href="http://www.ctimls.com/support/kb/error%20fixes/fix_mapi_error.htm">Fix
CLS Send, MAPI or Runtime Error in Email</a></p>
</div>
<div class="sect3">
<h4 id="_windows_10_or_8_1_and_thunderbird"><a class="anchor" href="#_windows_10_or_8_1_and_thunderbird"></a>Windows 10 or 8.1 and Thunderbird</h4>
<div class="paragraph">
<p>For example, if you use Thunderbird exclusively with Win10 or Win8.1,
this should fix the problem</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-code hljs" data-lang="code"> Start &gt; Control Panel &gt; Default Programs &gt; Set your Default Programs,  Then pick Thunderbird.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_windows_vista_or_xp_and_thunderbird"><a class="anchor" href="#_windows_vista_or_xp_and_thunderbird"></a>Windows Vista or XP and Thunderbird</h4>
<div class="ulist">
<ul>
<li>
<p><strong>Outside OpenCPN</strong> there is nothing more to do except to ensure that
there is a mail system (mine is thunderbird) correctly configured and
set as “main” on the device.<br>
also verify if the mapi32.dll is present in c:/windows/system32 (or
equivalent for 64b) (otherwise an error message will be the result).</p>
</li>
<li>
<p><strong>Inside OpenCPN</strong>, there is nothing to do; the sender mail address can
be entered, but will not be used. Just don&#8217;t forget to enter the zyGRIB
login and password.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When clicking on “send” button :<br>
if the “main” mail system is not open, OpenCPN opens it and the waiting
messages are received.<br>
remark : if there are many waiting messages, it could take a while. That
is why it would be better to create a specific address for this
purpose.<br>
Then a new mail page is opened with all mail elements already written
thus ready to be sent.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_linux"><a class="anchor" href="#_linux"></a>Linux</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_using_ssmtp"><a class="anchor" href="#_using_ssmtp"></a>Using SSMTP</h3>
<div class="paragraph">
<p>How to install and configure sSMTP:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>1) Install the ssmtp package.<br>
If another MTA is already installed, you may be asked to uninstall it
before installing ssmtp.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once it&#8217;s done you can test it by typing this command:<br>
“whereis sendmail”</p>
</div>
<div class="paragraph">
<p>The answer should be something like “/usr/sbin/sendmail”.</p>
</div>
<div class="paragraph">
<p>Use that answer in the next command:<br>
“ls -la /usr/sbin/sendmail”</p>
</div>
<div class="paragraph">
<p>If everything is OK you should get this answer:<br>
“/usr/sbin/sendmail → ssmtp”<br>
showing that Sendmail function is now connected to ssmtp.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>2) Now there are two files to set:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>the first file : /etc/ssmtp/ssmtp.conf ( with root rights )<br>
<br>
The typical setting should be:<br>
root=postmaster<br>
AuthUser=yourlogin to your ISP access<br>
AuthPass=yourpasseword to your ISP access<br>
mailhub=yourISPserveurname.yourdomain (for example smtp.orange.fr)<br>
rewriteDomain=yourdomain<br>
FromLineOverride=YES<br>
hostname= the full host-name ( normally automatically entered, but if
not you can type the command : “hostname” to get it)<br>
<br>
For ISP requiring a TLS connection , it could be necessary to add the
line UseTLS=YES or UseSTARTTLS=YES<br>
<br>
the second file : /etc/ssmtp/revaliases (with root rights)<br>
<br>
Enter this line.<br>
root:yourlogin@yourdomain:yourISPserveurname.yourd
omain<span class="image"><img src="../../../http_3a_2f_2fwww.cruisersforum.com_2fimages_2fsmilies_2ftongue.gif" alt="image"></span>ort<br>
<br>
the default port was 25 but now many ISP refuse it and use 587. If you
have a mail system, you will find the right value in it.sudo
dpkg-reconfigure exim4-config<br>
Sendmail/Postfix install for Mac<br>
- Inside OpenCPN :You must enter the sender address : your entire mail
address, the one you will use to send mails and receive answers<br>
<br>
When you click on the “send” button, the mail is directly sent. You can
find the log here : /var/log/mail.log<br></p>
</div>
</div>
<div class="sect2">
<h3 id="_using_exim4"><a class="anchor" href="#_using_exim4"></a>Using Exim4</h3>
<div class="paragraph">
<p>First install Exim4<br>
$sudo apt-get install exim4<br>
then configure it (again).<br>
$sudo dpkg-reconfigure exim4-config<br>
This is a very simple setup where exim is just used to forward mail to
the ISP:s smtp server. Local system mail is also available.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail1.png" alt="image" width="650"></span><br>
It&#8217;s important to use the choice above.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail2.png" alt="image" width="650"></span><br>
I just use “localhost”.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail3.png" alt="image" width="650"></span><br>
We have no incoming connections.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail4.png" alt="image" width="650"></span><br>
We are not using this.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail5.png" alt="image" width="650"></span><br>
We are not using this.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail6.png" alt="image" width="650"></span><br>
This is important. It must point to your Internet Service Providers SMTP
server.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail7.png" alt="image" width="650"></span><br>
Your choice!</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail8.png" alt="image" width="650"></span><br>
RTFM and make up your mind. Not a big deal for this simple setup.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail9.png" alt="image" width="650"></span><br>
RTFM.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../../../manual/plugins/grib/33gribmail10.png" alt="image" width="650"></span><br>
Your Choice, but no point in splitting this simple setup.</p>
</div>
<div class="paragraph">
<p>Edit /etc/exim4/passwd.client so it contains your username and password
to your ISP:s mail server.</p>
</div>
<div class="paragraph">
<p>[.np_break]# #</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"># password file used when the local exim is authenticating to a
remote_PARATABLE_INS_# host as a
client._PARATABLE_INS_#<em>PARATABLE_INS_# *see
exim4_passwd_client(5) for more
documentation*_PARATABLE_INS</em><mark><em>PARATABLE_INS_#
Example:_PARATABLE_INS</em></mark>##
target.mail.server.example:login:password_PARATABLE_INS_# for OpenCPN
you can use *:login:password_PARATABLE_INS_*:fakexyz123:madeupXYZ123</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>[.np_break]# #</p>
</div>
<div class="paragraph">
<p>(Re)start Exim4<br>
$ /etc/init.d/exim4
\{start|stop|restart|reload|status|what|force-stop}<br>
Start testing<br>
<br>
<br>
<br></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mac_os_x"><a class="anchor" href="#_mac_os_x"></a>Mac OS X</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_using_sendmailpostfix"><a class="anchor" href="#_using_sendmailpostfix"></a>Using Sendmail/Postfix</h3>
<div class="literalblock">
<div class="content">
<pre> +
It is not so easy to install this on a Mac since you will need some
experience with terminal using. The example below uses an googlemail
account and nano as editor: +
 +
Step 1 +
Type in terminal these 6 lines one after another with return: +
sudo mkdir -p /Library/Server/Mail/Data/spool +
 +
sudo gzip
/usr/share/man/man1/\{postalias.1,postcat.1,postconf.1,postdrop.1,postf
ix.1,postkick.1,postlock.1,postlog.1,postmap.1,pos
tmulti.1,postqueue.1,postsuper.1,sendmail.1} +
 +
sudo gzip
/usr/share/man/man5/\{access.5,aliases.5,bounce.5,canonical.5,cidr_tabl
e.5,generic.5,header_checks.5,ldap_table.5,master.
5,mysql_table.5,nisplus_table.5,pcre_table.5,pgsql
_table.5,postconf.5,postfix-wrapper.5,regexp_table.5,relocated.5,tcp_table.5,t
ransport.5,virtual.5} +
 +
sudo gzip
/usr/share/man/man8/\{anvil.8,bounce.8,cleanup.8,discard.8,error.8,flus
h.8,local.8,master.8,oqmgr.8,pickup.8,pipe.8,proxy
map.8,qmgr.8,qmqpd.8,scache.8,showq.8,smtp.8,smtpd
.8,spawn.8,tlsmgr.8,trivial-rewrite.8,verify.8,virtual.8} +
 +
sudo /usr/sbin/postfix set-permissions +
 +
sudo chmod 700 /Library/Server/Mail/Data/mta +
 +
Step 2 +
Type in terminal another command to start the nano editor with this
file: +
sudo nano /etc/postfix/sasl_passwd +
 +
Type into the nano editor: +
smtp.googlemail.com:587 YourAccountname@googlemail.com:YourPassword +
 +
Substitute YourAccountname and YourPassword with your data. +
Save the file in nano with Ctrl-O and exit with Ctrl-X. +
 +
Step 3 +
Publicate the new file in terminal with this command: +
sudo postmap /etc/postfix/sasl_passwd +
 +
Step 4 +
You have to edit the main config file and add at the end the following
lines with +
this command in Terminal: +
sudo nano /etc/postfix/main.cf +
 +
This to add: +
# Minimum Postfix-specific configurations. +
mydomain_fallback = localhost +
mail_owner = _postfix +
setgid_group = _postdrop +
relayhost=smtp.googlemail.com:587 +
 +
# Enable SASL authentication in the Postfix SMTP client. +
smtp_sasl_auth_enable=yes +
smtp_sasl_password_maps=hash:/etc/postfix/sasl_passwd +
smtp_sasl_security_options= +
 +
# Enable Transport Layer Security (TLS), i.e. SSL. +
smtp_use_tls=yes +
smtp_tls_security_level=encrypt +
tls_random_source=dev:/dev/urandom +
 +
Save the file and exit nano as in step 2. +
 +
Step 5 +
Now you can start postfix in terminal with: +
sudo postfix start +
 +
If an error occurs correct main.cf and start again with: +
sudo postfix reload +
 +
Step 6 +
Now you can test your work in terminal with: +
date | mail -s test YourAccountname@googlemail.com +
 +
 +
Done. +
Supplemental +
If you want to have started sendmail/postfix each time you start you
start +
your machine you can add these lines to the launch daemon: +
&lt;key&gt;RunAtLoad&lt;/key&gt; +
&lt;true/&gt; +
 +
Do this with this command in terminal: +
sudo nano /System/Library/LaunchDaemons/org.postfix.master.plist +
 +
After that this file should look like this: +
&lt;?xml version=“1.0” encoding=“UTF-8”?&gt; +
&lt;!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN"
"http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt; +
&lt;plist version=“1.0”&gt; +
&lt;dict&gt; +
&lt;key&gt;Label«/key&gt; +
&lt;string&gt;org.postfix.master&lt;/string&gt; +
&lt;key&gt;Program&lt;/key&gt; +
&lt;string&gt;/usr/libexec/postfix/master&lt;/string&gt; +
&lt;key&gt;ProgramArguments&lt;/key&gt; +
&lt;array&gt; +
&lt;string&gt;master&lt;/string&gt; +
&lt;string&gt;-e&lt;/string&gt; +
&lt;string&gt;60&lt;/string&gt; +
&lt;/array&gt; +
&lt;key&gt;QueueDirectories&lt;/key&gt; +
&lt;array&gt; +
&lt;string&gt;/var/spool/postfix/maildrop&lt;/string&gt; +
&lt;/array&gt; +
&lt;key&gt;AbandonProcessGroup&lt;/key&gt; +
&lt;true/&gt; +
&lt;key&gt;OnDemand/lt;/key&gt; +
&lt;true/&gt; +
&lt;key&gt;RunAtLoad&lt;/key&gt; +
&lt;true/&gt; +
&lt;/dict&gt; +
&lt;/plist&gt; +</pre>
</div>
</div>
<div class="paragraph">
<p>Instead of googlemail in this example you may use any other mail server.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.
     Sources, based on the Antora default UI, are available at https://gitlab.com/leamas/antora-ui-default
  </p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
